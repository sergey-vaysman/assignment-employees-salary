(window["webpackJsonpemployee-salary"]=window["webpackJsonpemployee-salary"]||[]).push([[0],{16:function(e,t,a){e.exports=a(29)},21:function(e,t,a){},27:function(e,t,a){},29:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),l=a(8),r=a.n(l),s=(a(21),a(2)),c=a(3),p=a(5),i=a(4),m=a(6),y=a(10),u=(a(27),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(p.a)(this,Object(i.a)(t).call(this,e))).emptyNewEmployee={newEmployeeName:"",newEmployeeSalary:""},a.onCreateEmployee=function(e){e.preventDefault(),a.props.onCreateEmployee({name:a.state.newEmployeeName,salary:a.state.newEmployeeSalary}),a.resetForm()},a.onNameChange=function(e){a.setState({newEmployeeName:e.target.value})},a.onSalaryChange=function(e){a.setState({newEmployeeSalary:e.target.value})},a.state=a.emptyNewEmployee,a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("form",{onSubmit:this.onCreateEmployee,className:"block-margin"},o.a.createElement("div",{className:"form-row justify-content-center"},o.a.createElement("div",{className:"col-auto"},o.a.createElement("input",{type:"text",className:"form-control",value:this.state.newEmployeeName,onChange:this.onNameChange,placeholder:"\u0418\u043c\u044f"})),o.a.createElement("div",{className:"col-auto"},o.a.createElement("input",{type:"text",className:"form-control",value:this.state.newEmployeeSalary,onChange:this.onSalaryChange,placeholder:"\u041e\u043a\u043b\u0430\u0434"})),o.a.createElement("div",{className:"col-auto"},o.a.createElement("button",{type:"submit",className:"btn btn-primary"},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"))))}},{key:"resetForm",value:function(){this.setState(this.emptyNewEmployee)}}]),t}(n.Component)),E=function(e){function t(e){var a;return Object(s.a)(this,t),console.log("employee constructor, props: ",e),(a=Object(p.a)(this,Object(i.a)(t).call(this,e))).onSalaryChanged=function(e){a.setState({salary:e.target.value})},a.onEditSalaryClicked=function(e){e.preventDefault(),a.props.onEditSalary({id:a.props.employee.id,salary:a.state.salary})},a.state={salary:a.props.employee.salary.value},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return console.log("render employee, props: ",this.props),o.a.createElement("tr",{className:"employee-item"},o.a.createElement("td",{style:{paddingTop:"1em"}},this.props.employee.name),o.a.createElement("td",null,o.a.createElement("div",{class:"input-group mb-3"},o.a.createElement("input",{type:"text",class:"form-control",placeholder:"Salary-placeholder","aria-label":"Salary-label","aria-describedby":"btnEditSalary",value:this.state.salary,onChange:this.onSalaryChanged}),o.a.createElement("div",{class:"input-group-append"},o.a.createElement("button",{class:"btn btn-outline-secondary",type:"button",id:"btnEditSalary",onClick:this.onEditSalaryClicked},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")))))}}]),t}(n.Component),d=function(e){return console.log("render employee list, props: ",e),o.a.createElement("table",{className:"table employee-list"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{scope:"col"},"\u0418\u043c\u044f"),o.a.createElement("th",{scope:"col"},"\u041e\u043a\u043b\u0430\u0434"))),o.a.createElement("tbody",null,e.employees.map((function(t){return o.a.createElement(E,{key:t.id,employee:t,onEditSalary:e.onEditSalary})}))))},h=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(p.a)(this,Object(i.a)(t).call(this,e))).onDeleteAll=function(e){e.preventDefault(),a.props.onDeleteAll()},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{class:"container"},o.a.createElement(u,{onCreateEmployee:this.props.onCreateEmployee}),o.a.createElement(d,{employees:this.props.employees,onEditSalary:this.props.onEditSalary}),o.a.createElement("form",{onSubmit:this.onDeleteAll},o.a.createElement("button",{type:"submit",className:"btn btn-primary"},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u0441\u0435")))}}]),t}(n.Component),f=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).onCreateEmployee=function(e){var t={name:e.name,salary:{value:e.salary}};fetch("/api/create_employee",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){console.log("created employee: ",e),a.props.dispatch({type:"CREATE_EMPLOYEE",payload:{employee:e}})}))},a.onEditSalary=function(e){var t=e.id,n=e.salary;console.log("App.onEditSalary: ",t,n);var o={id:t,salary:{value:n}};fetch("/api/edit_employee",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify(o)}).then((function(e){console.log("edit_employee response: ",e),a.props.dispatch({type:"EDIT_SALARY",payload:{id:t,salary:n}})}))},a.onDeleteAll=function(){fetch("/api/remove_all_employees",{method:"POST",body:""}).then((function(e){return a.props.dispatch({type:"DELETE_ALL"})}))},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(h,{employees:this.props.employees,onCreateEmployee:this.onCreateEmployee,onEditSalary:this.onEditSalary,onDeleteAll:this.onDeleteAll}))}},{key:"componentDidMount",value:function(){var e=this;fetch("/api/all_employees").then((function(e){return e.json()})).then((function(t){console.log("GET /api/all_employees result: ",t),e.props.dispatch({type:"FETCH_EMPLOYEES_SUCCEEDED",payload:{employees:t}})}))}}]),t}(n.Component);var b=Object(y.b)((function(e){return console.log("mapStateToProps"),{employees:e.employees}}))(f);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var v=a(9);a(28);var S=Object(v.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{employees:[]},t=arguments.length>1?arguments[1]:void 0;if(console.log("reducer, action: ",t),"CREATE_EMPLOYEE"===t.type)return{employees:e.employees.concat(t.payload.employee)};if("FETCH_EMPLOYEES_SUCCEEDED"===t.type)return{employees:t.payload.employees};if("EDIT_SALARY"===t.type){var a=t.payload.id;return e.employees.find((function(e){return e.id===a})).salary.value=t.payload.salary,{employees:e.employees}}return"DELETE_ALL"===t.type?{employees:[]}:e}));r.a.render(o.a.createElement(y.a,{store:S},o.a.createElement(b,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[16,1,2]]]);
//# sourceMappingURL=main.0c2cf8d2.chunk.js.map